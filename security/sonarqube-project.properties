# ===========================================
# SonarQube Project Configuration
# Banking Application Security Analysis
# DORA/NIS2 Compliance Support
# ===========================================

# Project identification
sonar.projectKey=banking-crm-application
sonar.projectName=Banking CRM Application
sonar.projectVersion=1.0.0
sonar.organization=creand

# Source configuration
sonar.sources=src
sonar.tests=src
sonar.test.inclusions=**/*.test.ts,**/*.test.tsx,**/*.spec.ts,**/*.spec.tsx
sonar.exclusions=**/node_modules/**,**/dist/**,**/build/**,**/*.d.ts,**/coverage/**

# TypeScript/JavaScript configuration
sonar.typescript.tsconfigPath=tsconfig.json
sonar.javascript.lcov.reportPaths=coverage/lcov.info

# Encoding
sonar.sourceEncoding=UTF-8

# ===========================================
# Quality Gates (Banking Compliance)
# ===========================================

# Reliability
sonar.qualitygate.wait=true

# Security hotspots must be reviewed
sonar.security.hotspots.reviewed=100

# ===========================================
# Security Rules Configuration
# ===========================================

# Enable all security rules
sonar.issue.ignore.multicriteria=e1,e2

# Ignore test files for security analysis
sonar.issue.ignore.multicriteria.e1.ruleKey=*
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*test*/**

# Ignore mock files
sonar.issue.ignore.multicriteria.e2.ruleKey=*
sonar.issue.ignore.multicriteria.e2.resourceKey=**/__mocks__/**

# ===========================================
# OWASP Top 10 Coverage
# ===========================================

# A01:2021 - Broken Access Control
sonar.security.standards.owaspTop10-2021=a1,a2,a3,a4,a5,a6,a7,a8,a9,a10

# Enable security hotspots
sonar.security.enabledRules=squid:S2068,squid:S2115,squid:S3649,squid:S5131,squid:S5146,squid:S5167,squid:S5247

# ===========================================
# Banking-Specific Rules
# ===========================================

# Financial data handling
sonar.cpd.exclusions=**/types/**,**/constants/**

# Sensitive data patterns
sonar.issue.enforce.multicriteria=e1,e2,e3

# Enforce rules on financial modules
sonar.issue.enforce.multicriteria.e1.ruleKey=typescript:S2068
sonar.issue.enforce.multicriteria.e1.resourceKey=**/accounting/**

sonar.issue.enforce.multicriteria.e2.ruleKey=typescript:S5131
sonar.issue.enforce.multicriteria.e2.resourceKey=**/auth/**

sonar.issue.enforce.multicriteria.e3.ruleKey=typescript:S3649
sonar.issue.enforce.multicriteria.e3.resourceKey=**/api/**

# ===========================================
# Code Coverage Requirements
# ===========================================

# Minimum coverage for new code
sonar.coverage.minimum=80

# Coverage exclusions
sonar.coverage.exclusions=**/types/**,**/constants/**,**/index.ts,**/*.d.ts

# ===========================================
# Duplication Settings
# ===========================================

sonar.cpd.typescript.minimumtokens=100
sonar.cpd.typescript.minimumLines=10

# ===========================================
# External Reports Integration
# ===========================================

# ESLint report
sonar.eslint.reportPaths=eslint-security-report.json

# TypeScript coverage
sonar.typescript.lcov.reportPaths=coverage/lcov.info

# ===========================================
# DORA/NIS2 Compliance Tags
# ===========================================

# Tag security issues for compliance tracking
sonar.issue.tags=security,dora,nis2,banking,compliance

# Link to external tracking
sonar.links.homepage=https://creand.ad
sonar.links.ci=https://github.com/creand/banking-app/actions
sonar.links.scm=https://github.com/creand/banking-app
sonar.links.issue=https://github.com/creand/banking-app/issues
